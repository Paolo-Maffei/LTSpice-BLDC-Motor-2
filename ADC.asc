Version 4
SHEET 1 1016 680
WIRE -928 -144 -992 -144
WIRE -16 -144 -80 -144
WIRE -80 -112 -80 -144
WIRE -16 -112 -16 -144
WIRE -928 -96 -992 -96
WIRE -80 0 -80 -32
WIRE -816 80 -1056 80
WIRE -448 80 -528 80
WIRE -272 80 -368 80
WIRE -160 80 -272 80
WIRE 96 80 0 80
WIRE 288 80 256 80
WIRE -272 112 -272 80
WIRE -848 128 -912 128
WIRE -816 128 -848 128
WIRE -384 176 -384 128
WIRE -1056 192 -1056 80
WIRE -912 192 -912 128
WIRE -80 192 -80 160
WIRE -272 208 -272 176
WIRE -848 240 -848 128
WIRE -432 240 -432 128
WIRE -432 240 -848 240
WIRE -80 304 -80 272
WIRE -1056 368 -1056 272
WIRE -912 368 -912 272
FLAG -16 -112 0
FLAG -80 304 0
FLAG 288 80 Out
IOPIN 288 80 Out
FLAG -992 -144 In1
IOPIN -992 -144 In
FLAG -992 -96 In2
IOPIN -992 -96 In
FLAG -1056 368 0
FLAG -912 368 0
FLAG -272 208 0
FLAG -384 176 0
SYMBOL Quantize 176 80 R0
WINDOW 39 -168 106 Left 0
SYMATTR SpiceLine range={range}, levels=2**{bits}
SYMATTR InstName X1
SYMBOL Clamp -80 80 R0
SYMATTR InstName X2
SYMBOL bv -80 288 R180
WINDOW 0 24 104 Left 0
WINDOW 3 24 16 Left 0
SYMATTR InstName B1
SYMATTR Value V={range/2}
SYMBOL bv -80 -16 R180
WINDOW 0 24 104 Left 0
WINDOW 3 44 57 Left 0
SYMATTR InstName B2
SYMATTR Value V={range/2}
SYMBOL S&H -672 80 R0
SYMATTR InstName X3
SYMBOL bv -1056 176 R0
SYMATTR InstName B3
SYMATTR Value V=V(In1)
SYMBOL bv -912 176 R0
SYMATTR InstName B4
SYMATTR Value V=V(In2)
SYMBOL sw -464 80 R270
WINDOW 3 13 103 Left 0
SYMATTR Value VCS1
SYMATTR InstName S1
SYMBOL cap -288 112 R0
SYMATTR InstName C1
SYMATTR Value 100pF
TEXT -832 -88 Left 0 !.model VCS1 SW(Ron=1E-6 Roff=10T Vt=0)
